100 REM init
110 SETCOLOR 1,1,14: SETCOLOR 2,0,0: SETCOLOR 4,0,0
120 PRINT CHR$(125): POKE 752,1 : PRINT CHR$(32)
130 DX = 0: DY = 0 : DT = 0 : S = 15 : SLAST = 15 : T = 1 : TLAST = 1
140 X = 3: Y = 3
150 CHAR = 20
990 GOTO 10000

1000 REM joystick reading
1010 S = STICK(0) : T = STRIG(0) : SLAST = S : TLAST = T
1020 S = STICK(0) : T = STRIG(0) : IF S = SLAST AND T = TLAST THEN 1020 
1025 SLAST = S : IF S = 15 AND T = TLAST THEN 1020
1026 IF TLAST <> T AND T = 1 THEN TLAST = T: GOTO 1020
1030 DX = (S = 5 OR S = 6 OR S = 7) - (S = 9 OR S = 10 OR S = 11)
1031 DY = (S = 5 OR S = 9 OR S = 13) - (S = 6 OR S = 10 OR S = 14)
1032 DT = ABS(T - 1)
1040 RETURN

10000 REM Main loop
10010 POSITION X, Y: PRINT CHR$(32)
10020 X = X + DX: Y = Y + DY: POSITION X, Y: PRINT CHR$(CHAR)
10030 GOSUB 1000
10040 IF DT THEN CHAR = ABS(CHAR - 127)
10900 GOTO 10000

RUN
