100 REM init
110 SETCOLOR 1,1,14: SETCOLOR 2,0,0: SETCOLOR 4,0,0
120 PRINT CHR$(125): POKE 752,1 : PRINT CHR$(32)
130 DX = 0: DY = 0 : DT = 0 : S = 15 : SLAST = 15 : T = 1 : TLAST = 1
140 X = 3: Y = 3
150 CHAR = 20

200 SIZE = 7: CURX = 1: CURY = 1: SCX = 4: SCY = 4
990 GOTO 31000

1000 REM joystick reading
1010 S = STICK(0) : T = STRIG(0) : SLAST = S : TLAST = T
1020 S = STICK(0) : T = STRIG(0) : IF S = SLAST AND T = TLAST THEN 1020 
1030 SLAST = S : IF S = 15 AND T = TLAST THEN 1020
1040 IF TLAST <> T AND T = 1 THEN TLAST = T: GOTO 1020
1050 DX = (S = 5 OR S = 6 OR S = 7) - (S = 9 OR S = 10 OR S = 11)
1060 DY = (S = 5 OR S = 9 OR S = 13) - (S = 6 OR S = 10 OR S = 14)
1070 DT = ABS(T - 1)
1080 RETURN

10000 REM Display candle
10020 IF BOARD(CURX, CURY) = 1 THEN PCHAR = 20: GOTO 10110
10030 PCHAR = 148
10110 POSITION 8+(CURX * 3), -1+CURY * 3: PRINT CHR$(PCHAR)
10120 IF SCY = CURY AND SCX = CURX THEN PCHAR = 0: GOTO 10130
10125 PCHAR = 32
10130 POSITION 7+(CURX * 3), -2+CURY * 3: PRINT CHR$(PCHAR)
10140 POSITION 9+(CURX * 3), -2+CURY * 3: PRINT CHR$(PCHAR)
10150 POSITION 7+(CURX * 3), CURY * 3: PRINT CHR$(PCHAR)
10160 POSITION 9+(CURX * 3), CURY * 3: PRINT CHR$(PCHAR)
10200 RETURN

30000 REM Main loop - point movement
30010 POSITION X, Y: PRINT CHR$(32)
30020 X = X + DX: Y = Y + DY: POSITION X, Y: PRINT CHR$(CHAR)
30030 GOSUB 1000
30040 IF DT AND CHAR = 20 THEN CHAR = 148: GOTO 30060
30050 IF DT AND CHAR = 148 THEN CHAR = 20
30060 GOTO 30000

31000 REM Main loop - candles game
31001 SIZE = 7: DIM BOARD(SIZE, SIZE)
31010 FOR Y=1 TO SIZE: FOR X=1 TO SIZE: CURX=X: CURY=Y
31020 GOSUB 10000
31030 NEXT X: NEXT Y
